package TD5;

import java.io.FileInputStream;
import java.io.FileNotFoundException;

import org.apache.jena.query.Query;
import org.apache.jena.query.QueryExecution;
import org.apache.jena.query.QueryExecutionFactory;
import org.apache.jena.query.QueryFactory;
import org.apache.jena.query.ResultSet;
import org.apache.jena.query.ResultSetFormatter;
import org.apache.jena.rdf.model.Model;
import org.apache.jena.rdf.model.ModelFactory;
import jade.core.Agent;

public class AgentRech extends Agent {
	
	private static final long serialVersionUID = -9074818395516468244L;

	public void setup() {
		System.out.println(getLocalName() + "--> installed");
		test();
	}
	
	public static void test() {
		String query = "requete_foaf.sparql"; // fichier contenant la requête
		//String query = "requete.sparql";
		Model model = ModelFactory.createDefaultModel();
		try {
		model.read(new FileInputStream("ABOX.n3"),null, "TURTLE");
		runSelectQuery(query, model);
		} catch (FileNotFoundException e) {
		e.printStackTrace();
		}
	}
	
	public static void runSelectQuery(String qfilename, Model model) {
		Query query = QueryFactory.read(qfilename);
		QueryExecution queryExecution = QueryExecutionFactory.create(query, model);
		ResultSet r = queryExecution.execSelect();
		ResultSetFormatter.out(System.out,r);
		queryExecution.close();
		}
}

